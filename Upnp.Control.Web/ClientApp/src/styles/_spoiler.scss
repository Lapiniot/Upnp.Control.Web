/*********** Spoiler component general styles **********/
$spoiler-border-radius: var(--#{$prefix}border-radius) !default;
$spoiler-border-width: var(--#{$prefix}border-width) !default;
$spoiler-color: var(--#{$prefix}body-color) !default;
$spoiler-border-color: var(--#{$prefix}border-color-translucent) !default;
$spoiler-padding-x: $input-btn-padding-x !default;
$spoiler-padding-y: $input-btn-padding-y !default;

.spoiler {
    --#{$prefix}spoiler-border-radius: #{$spoiler-border-radius};
    --#{$prefix}spoiler-border-width: #{$spoiler-border-width};
    --#{$prefix}spoiler-border-color: #{$spoiler-border-color};
    --#{$prefix}spoiler-padding-x: #{$spoiler-padding-x};
    --#{$prefix}spoiler-padding-y: #{$spoiler-padding-y};
    --#{$prefix}spoiler-animation-duration: var(--#{$animation-prefix}duration-1);

    @include border-radius(var(--#{$prefix}spoiler-border-radius));
    border: var(--#{$prefix}spoiler-border-width) solid var(--#{$prefix}spoiler-border-color);

    & > summary {
        display: grid;
        grid: auto / 1fr auto;
        align-items: center;
        gap: var(--#{$prefix}spoiler-padding-x);
        padding: var(--#{$prefix}spoiler-padding-y) var(--#{$prefix}spoiler-padding-x);
        border-radius: var(--#{$prefix}spoiler-border-radius);

        &::-webkit-details-marker {
            display: none;
        }

        & > * {
            display: inline-flex;
            flex-wrap: wrap;
            overflow: hidden;
            align-items: center;
            gap: var(--#{$prefix}spoiler-padding-x);
        }

        & + * {
            display: grid;

            & > * {
                overflow: hidden;
            }
        }

        &::before {
            display: inline-block;
            width: 24px;
            height: 24px;
            order: 1;
            content: var(--#{$prefix}expand-button-icon);
        }
    }

    &.sp-expanding {
        & > summary {
            &::before {
                @include animation(half-turn var(--#{$prefix}spoiler-animation-duration));
            }

            & + * {
                @include animation(grid-expand var(--#{$prefix}spoiler-animation-duration) ease-in);
            }
        }
    }

    &.sp-collapsing {
        & > summary {
            &::before {
                @include animation(half-turn var(--#{$prefix}spoiler-animation-duration) reverse);
            }

            & + * {
                @include animation(grid-expand var(--#{$prefix}spoiler-animation-duration) ease-out reverse);
            }
        }
    }

    &[open] > summary {
        border-radius: var(--#{$prefix}spoiler-border-radius) var(--#{$prefix}spoiler-border-radius) 0 0;

        &::before {
            rotate: -0.5turn;
        }
    }

    &[inert] > summary {
        opacity: #{$btn-disabled-opacity};
    }

    &-flush {
        --#{$prefix}spoiler-border-radius: 0;
        --#{$prefix}spoiler-border-width: 0;
    }
}